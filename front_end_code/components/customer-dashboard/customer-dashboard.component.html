<div class="d-flex flex-column vh-100 bg-light">
  <!-- Header -->
  <header class="d-flex justify-content-between align-items-center bg-white shadow-sm px-4 py-2">
    <div class="d-flex align-items-center">
      <!-- Sidebar toggle -->
      <button
        class="btn btn-outline-secondary me-3"
        (click)="isCollapsed = !isCollapsed"
      >
        <i class="bi bi-list"></i>
      </button>

      <!-- Brand logo -->
      <img
        src="assets/logo 2.png"
        alt="Maverick Bank"
        style="height: 60px; object-fit: contain;"
      />
    </div>

    <!-- Optional right-side header content -->
    <div class="text-secondary fw-semibold small d-none d-sm-block">Customer Dashboard</div>
  </header>

  <!-- Body -->
  <div class="d-flex flex-grow-1">
    <!-- Sidebar -->
    <nav
      id="sidebar"
      [ngClass]="{ 'collapsed': isCollapsed }"
      class="d-flex flex-column bg-dark text-white p-3"
      style="width: 250px; min-width: 260px; transition: width 0.5s ease"
    >


      <!-- Navigation -->
      <ul class="nav nav-pills flex-column gap-2">
        <li class="nav-item">
          <a
            [routerLink]="['/customer-dashboard/my-accounts', customer?.customerId]"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            <i class="bi bi-wallet2 fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">My Accounts</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            routerLink="account-details"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-info-circle fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">Account Details</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            [routerLink]="['/customer-dashboard/open-account']"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-plus-circle fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">Open New Account</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            [routerLink]="['/customer-dashboard/transactions']"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-cash-stack fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">Transactions</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            [routerLink]="['/customer-dashboard/view-loans']"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-bank fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">View All Loans</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            [routerLink]="['/customer-dashboard/apply-loan']"
            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-file-earmark-plus fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">Apply Loan</span>
          </a>
        </li>
        <li class="nav-item">
          <a
           [routerLink]="['/customer-dashboard/my-loans', customer?.customerId]"

            routerLinkActive="active"
            class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
          >
            <i class="bi bi-clipboard-check fs-5 me-3"></i>
            <span *ngIf="!isCollapsed">My Loans</span>
          </a>
        </li>
        <li><hr class="dropdown-divider text-white opacity-50" /></li>
<li class="text-uppercase text-white-50 fw-bold small px-3">Customer Profile</li>

<li class="nav-item">
  <a
    [routerLink]="['/customer-dashboard/customer-register']"
    routerLinkActive="active"
    class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
  >
    <i class="bi bi-person-plus fs-5 me-3"></i>
    <span *ngIf="!isCollapsed">Register</span>
  </a>
</li>

<li class="nav-item">
<a
 [routerLink]="['/customer-dashboard/customer-view-profile', authService.getCurrentUser()?.userId]"
  routerLinkActive="active"
  class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
>
    <i class="bi bi-person-circle fs-5 me-3"></i>
    <span *ngIf="!isCollapsed">View Profile</span>
  </a>
</li>

<li class="nav-item">
  <a
    [routerLink]="['/customer-dashboard/customer-update', customer?.customerId]"
    routerLinkActive="active"
    class="nav-link d-flex align-items-center text-white rounded px-3 py-2"
  >
    <i class="bi bi-pencil-square fs-5 me-3"></i>
    <span *ngIf="!isCollapsed">Edit Profile</span>
  </a>
</li>

      </ul>
    </nav>

    <!-- Main content -->
    <main class="flex-grow-1 d-flex flex-column p-4" style="overflow-y: auto;">
      <!-- Welcome + Summary Cards -->
      <section class="mb-4">
        <h2
          class="fw-bold text-secondary mb-3"
          style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
        >
          Welcome, <span class="text-primary">Customer!</span>
         <span
    class="user-id-badge ms-3"
    *ngIf="userId !== null"
  >
  (userId : {{ userId }})
  </span>
        </h2>

        <!-- Router Outlet for actual child views -->
        <section
          class="flex-grow-1 bg-white rounded shadow-sm p-4"
          style="min-height: 300px; overflow-y: auto;"
        >
          <router-outlet></router-outlet>
        </section>
      </section>
    </main>
  </div>
</div>

<style>
  nav#sidebar a.nav-link:hover,
  nav#sidebar a.nav-link.active {
    background-color: #2563eb;
    color: white !important;
    transition: background-color 0.3s ease;
  }

  nav#sidebar a.nav-link {
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  nav#sidebar.collapsed {
    width: 70px !important;
    min-width: 70px !important;
    overflow-x: hidden;
  }

  nav#sidebar.collapsed .nav-link {
    justify-content: center;
    padding: 0.75rem 0.5rem;
  }

  nav#sidebar.collapsed img,
  nav#sidebar.collapsed hr {
    display: none;
  }

  main::-webkit-scrollbar {
    width: 8px;
  }

  main::-webkit-scrollbar-thumb {
    background-color: #6c757d88;
    border-radius: 4px;
  }
</style>
